---
title: Spring Bootë¥¼ ì‚¬ìš©í•˜ì—¬ ì±„íŒ… ì„œë¹„ìŠ¤ ë§Œë“¤ê¸°
date: "2025-03-17"
description: Spring Bootì™€ Socketì„ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ ì±„íŒ… ì˜ˆì œ êµ¬í˜„í•˜ê¸°
image: /contents/tech/springboot-socket/thumbnail.png
tag: Spring Boot
---

> í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” í•œêµ­ë””ì§€í„¸ë¯¸ë””ì–´ê³ ë“±í•™êµ ê³µì—…ì¼ë°˜ í”„ë¡œì íŠ¸ ìˆ˜í–‰í‰ê°€ë¥¼ ëª©ì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. [ìê¸°ê³„ë°œê³„íšì„œ í™•ì¸í•˜ê¸°](/contents/tech/springboot-socket/ìê¸°ê³„ë°œê³„íšì„œ.pdf)

> ì•„ì§ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤.

## Spring Boot í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸°

Spring Boot í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„  [spring initializr](https://start.spring.io/)ì— ì ‘ì†í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ë³¸ í”„ë¡œì íŠ¸ëŠ” Java 17 ê¸°ë°˜ìœ¼ë¡œ ìƒì„±í•˜ì˜€ìœ¼ë©°, Spring BootëŠ” 3.4.3 ë²„ì „ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì˜†ì— Dependenciesì—ì„œ ê°œë°œì— ì‚¬ìš©í•  dependencyë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”ë°, ì €ëŠ” Lombok, Spring Boot DevTools, Spring Web ì´ë ‡ê²Œ 3ê°œë¥¼ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´, ì•„ë˜ Generate ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìš´ë¡œë“œ í›„ InteliJë¡œ ì—´ì–´ì£¼ì„¸ìš”.

![spring initializr](/contents/tech/springboot-socket/init.png) _spring initializr_

## Supabase Database ì—°ê²°í•˜ê¸°

ì±„íŒ… ì•±ì—ì„œ íšŒì› ì‹ë³„ê³¼ ì±„íŒ… ë‚´ìš© ì €ì¥ ë“±ì˜ ê¸°ëŠ¥ì„ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•œ í›„ ì—°ê²°í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ìš°ì„  Supbaseì— ì ‘ì†í•©ë‹ˆë‹¤.

![Supabase Dashboard](/contents/tech/springboot-socket/db-dash.png) _Supabase Dashboard_

ê·¸ë¦¬ê³  ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì„œë²„ë¥¼ ê°€ê¹Œìš´ ê³³ìœ¼ë¡œ ì„ íƒí•˜ê³ , ë¹„ë°€ë²ˆí˜¸ëŠ” ê¸°ì–µí•´ë†“ì•„ì•¼ í•©ë‹ˆë‹¤.

![Supabase New Project](/contents/tech/springboot-socket/db-set.png) _Supabase New Project_

ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ë©´ ì•„ë˜ì™€ ê°™ì€ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤. ì´ í˜ì´ì§€ê°€ ë°©ê¸ˆ ë§Œë“  í”„ë¡œì íŠ¸ì˜ ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.

![Supabase Dashboard](/contents/tech/springboot-socket/db-home.png) _Supabase Project Dashboard_

Databaseë¥¼ ìƒì„±í–ˆìœ¼ë‹ˆ, Spring Boot í”„ë¡œì íŠ¸ì—ì„œ ì—°ê²°í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì¤ë‹ˆë‹¤.

```java:build.gradle
implementation 'org.springframework.session:spring-session-jdbc'
runtimeOnly 'org.postgresql:postgresql'
implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
implementation 'org.springframework.boot:spring-boot-starter-security'
```

ì²« ë²ˆì§¸ëŠ” Spring Session JDBC ì§€ì›ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. JDBC ê¸°ë°˜ ì„¸ì…˜ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ ì •ë³´ë¥¼ RDBMS(PostgreSQL, MySQL ë“±)ì— ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‘ ë²ˆì§¸ëŠ” PostgreSQL ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. SupabaseëŠ” PostgreSQLì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ì„œë¹„ìŠ¤ì´ê¸° ë•Œë¬¸ì—, PostgreSQL ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

ì„¸ ë²ˆì§¸ëŠ” Spring Data JPA ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. JPAë¥¼ í†µí•´ ë¦¬í¬ì§€í† ë¦¬, íŠ¸ëœì­ì…˜ ê´€ë¦¬, ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ë“±ì„ ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë„¤ ë²ˆì§¸ëŠ” Spring Security ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. Spring Securityë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦, ê¶Œí•œ ë¶€ì—¬, ë³´ì•ˆ ì„¤ì • ë“±ì„ ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![build gradle](/contents/tech/springboot-socket/intelij-dependencies.png) _build.gradle_

ì´ ì²˜ëŸ¼ build.gradleì— ìœ„ ì„¸ ê°€ì§€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.

<p>
  <img
    src="/contents/tech/springboot-socket/gradle-download.png"
    alt="gradle download"
    width="200px"
  />
  <em>gradle ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</em>
</p>

ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í–ˆë‹¤ë©´, ì´ì œ Spring Boot í”„ë¡œì íŠ¸ì™€ ì—°ê²°í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì—°ê²°ì„ ìœ„í•´ ìš°ì„  Supabaseë¡œ ëŒì•„ê°€ ìƒë‹¨ì˜ Connect ë²„íŠ¼ì„ ëˆŒëŸ¬ì¤ë‹ˆë‹¤.

![Supabase Connect](/contents/tech/springboot-socket/db-connect.png) _Supabase Connect_

Connect ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìœ„ì™€ ê°™ì€ í™”ë©´ì´ ëœ¨ëŠ”ë°, ì—¬ê¸°ì„œ Typeì„ JDBCë¡œ ì„¤ì •í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  Transaction poolerì˜ ì£¼ì†Œë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  application.propertiesì— ì•„ë˜ì™€ ê°™ì´ Database ì •ë³´ë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤.

> Database ì •ë³´ëŠ” ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— Gitì„ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ë“¤ì€ gitignoreì— ì¶”ê°€í•´ì£¼ì„¸ìš”.

```java:application.properties
spring.application.name=ProjectName

spring.datasource.url=jdbc:postgresql://aws-0-ap-northeast-2.pooler.supabase.com:6543/postgres?user=<User>&password=<Password>
spring.datasource.username=postgres
spring.datasource.password=<Password>

spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.properties.hibernate.show_sql=true
spring.jpa.hibernate.ddl-auto=update
spring.session.jdbc.initialize-schema=always
```

![InteliJ Application Properties](/contents/tech/springboot-socket/intelij-properties.png) _application.properties_

ì¶”ê°€ë¡œ InteliJ Ultimate ë²„ì „ì„ ì‚¬ìš©í•˜ì‹ ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ InteliJì™€ Databaseë¥¼ ì—°ê²°í•´ì„œ Databaseë¥¼ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![InteliJ Ultimate](/contents/tech/springboot-socket/intelij-dbcheck.png) _InteliJ Database ì—°ê²°_

## Member ê´€ë ¨ ê¸°ëŠ¥ ë§Œë“¤ê¸°

ìš°ì„  ì±„íŒ… ê¸°ëŠ¥ êµ¬í˜„ ì „ ì‚¬ìš©ìë“¤ ê°„ ì‹ë³„ì„ ìœ„í•´ Member í…Œì´ë¸”ì„ ìƒì„±í•œ ë’¤ íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ ì£¼ê² ìŠµë‹ˆë‹¤.

![Member Class ìƒì„±](/contents/tech/springboot-socket/member-class.png) _Member Class ìƒì„±_

ìœ„ì™€ ê°™ì´ Member Classë¥¼ ìƒì„±í•œ ë’¤ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤ë©´ Supabaseì— Member í…Œì´ë¸”ì´ ìƒì„±ë©ë‹ˆë‹¤.

![Supabase Member Table](/contents/tech/springboot-socket/db-member.png) _Supabase Member Table_

ì´ì œ íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì£¼ê² ìŠµë‹ˆë‹¤.

> ì˜¤ëŠ˜ í”„ë¡œì íŠ¸ëŠ” ì†Œì¼“ ì´í•´ì— ì´ˆì ì„ ë‘ì—ˆê¸° ë•Œë¬¸ì— íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì˜ ì˜ˆì™¸ ì²˜ë¦¬ ë° í† í° ë°œí–‰ì€ ìƒëµí•˜ê³  ìœ ì €ë¥¼ ë‹¨ìˆœíˆ ìœ ì € ì´ë¦„ ê°’ìœ¼ë¡œ ì‹ë³„í•˜ê² ìŠµë‹ˆë‹¤.

p.s. ì˜†ì— ìˆë˜ ì¹œêµ¬ê°€ ë§ë„ ì•ˆë˜ëŠ” ì†Œë¦¬ë¼ê³  í•˜ì˜€ì§€ë§Œ ì œê°€ ê³ 3ì¸ ê´€ê³„ë¡œ ìˆ˜í–‰í‰ê°€ì— íˆ¬ìí•  ì‹œê°„ì´ ë§ì´ ì—†ê¸° ë•Œë¬¸ì— ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤. ğŸ˜¢

ìš°ì„  JPAë¥¼ ì‚¬ìš©í•˜ì—¬ CRUD ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ MemberRepositoryë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```java:MemberRepository.java
package com.pickle.socket.member;

import java.util.Optional;
import org.springframework.data.jpa.repository.JpaRepository;

public interface MemberRepository extends JpaRepository<Member, Long> {
    Optional<Member> findByUsername(String Username);
}
```

![Member Repository](/contents/tech/springboot-socket/intelij-memberrepo.png) _Member Repository_

ê·¸ë¦¬ê³  BCryptPasswordEncoder ë° CSRF ë³´í˜¸ë¥¼ ë¹„í™œì„±í™” í•˜ê¸° ìœ„í•´ì„œ SecurityConfigë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```java:SecurityConfig.java
package com.pickle.socket;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.SecurityFilterChain;

@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.csrf((csrf) -> csrf.disable());

        http.authorizeHttpRequests((authorize) ->
                authorize.requestMatchers("/**").permitAll()
        );

        return http.build();
    }
}
```

![Security Config](/contents/tech/springboot-socket/intelij-securityconfig.png) _Security Config_

ì´ì œ íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

```java:MemberController.Java
package com.pickle.socket.member;

import lombok.RequiredArgsConstructor;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequestMapping("member")
@RequiredArgsConstructor
public class MemberController {
    private final MemberRepository memberRepository;
    private final PasswordEncoder passwordEncoder;

    @PostMapping("/register")
    @ResponseBody
    String Register(String username, String password) {
        Member member = new Member();
        member.setUsername(username);
        member.setPassword(passwordEncoder.encode(password));
        memberRepository.save(member);
        return "success";
    }

    @PostMapping("login")
    @ResponseBody
    String Login(String username, String password) {
        var member = memberRepository.findByUsername(username).get();
        if(passwordEncoder.matches(password, member.getPassword())) {
            return member.getUsername();
        } else {
            return "fail";
        }
    }
}
```

![Member Controller](/contents/tech/springboot-socket/intelij-membercontroller.png) _Member Controller_

Postmanìœ¼ë¡œ íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ì„ ì‹œë„í•´ë³´ë©´ Tableì— ì˜ ì¶”ê°€ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![Postman Register](/contents/tech/springboot-socket/postman-register.png) _Postman Register_

![Tableì— ì¶”ê°€ëœ Member](/contents/tech/springboot-socket/db-register.png) _Tableì— ì¶”ê°€ëœ Member_

![Postman Login](/contents/tech/springboot-socket/postman-login.png) _Postman Login_

## Member ê¸°ëŠ¥ ì ìš©í•˜ê¸°

ì´ì œ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë†“ì€ í”„ë¡ íŠ¸ì—”ë“œë¡œ ì´ë™í•˜ì—¬ ì§€ê¸ˆê¹Œì§€ ë§Œë“¤ì—ˆë˜ Member ê´€ë ¨ ê¸°ëŠ¥ì„ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.

[í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ](https://github.com/pickle-team/front-socket)

í”„ë¡ íŠ¸ì—”ë“œëŠ” vite ê¸°ë°˜ Reactë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤. ìš°ì„  CORS ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ vite.config.jsì— proxyë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

```javascript:vite.config.js
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      "/api": {
        target: "http://localhost:8080",
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, ""),
      },
    },
  },
});
```

ê·¸ë¦¬ê³  Loginê³¼ Register ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ì „ ë‹¤ì‹œ í•œë²ˆ í˜„ì¬ í”„ë¡œì íŠ¸ì˜ í”Œë¡œìš°ë¥¼ í™•ì¸í•´ë³´ìë©´, 

ìš°ì„  Registerì˜ ê²½ìš° í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Sign Up ëª¨ë‹¬ì—ì„œ Usernameê³¼ Passwordë¥¼ ì…ë ¥ë°›ì•„ MemberControllerì˜ Registerë¡œ ìš”ì²­ì„ ë³´ë‚´ê³ , Registerì—ì„œëŠ” MemberRepositoryë¥¼ í†µí•´ Member Tableì— Usernameê³¼ Passwordë¥¼ ì €ì¥í•©ë‹ˆë‹¤. 

ê·¸ë¦¬ê³  Loginì˜ ê²½ìš° Sign In ëª¨ë‹¬ì—ì„œ Usernameê³¼ Passwordë¥¼ ì…ë ¥ë°›ì•„ MemberControllerì˜ Loginìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³ , Loginì—ì„œëŠ” MemberRepositoryë¥¼ í†µí•´ Member Tableì—ì„œ Usernameì„ ì°¾ì•„ Passwordë¥¼ ë¹„êµí•˜ì—¬ ì¼ì¹˜í•˜ë©´ Usernameì„ ë°˜í™˜í•©ë‹ˆë‹¤. ë°˜í™˜í•œ Usernameì€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Cookieì— ì €ì¥ë˜ë©° ì´ëŠ” ì‚¬ìš©ì êµ¬ë³„ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. (ë‹¤ì‹œ í•œ ë²ˆ ê°•ì¡°í•˜ì§€ë§Œ ì €ëŠ” ê³ 3ì´ê¸° ë•Œë¬¸ì— ë„˜ì–´ê°€ëŠ” ê²ƒì´ì§€ ì—¬ëŸ¬ë¶„ì€ í† í° ë°œí–‰ì„ ì² ì €í•˜ê²Œ í•´ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.)

### Register

![Frontend Register](/contents/tech/springboot-socket/fe-register.png) _Frontend Register_

![Frontend Register Response Ok](/contents/tech/springboot-socket/fe-registerok.png) _Frontend Register Response Ok_

![Supabase Register Response Ok](/contents/tech/springboot-socket/db-registerok.png) _Supabase Register Response Ok_

### Login

![Frontend Register Response Ok](/contents/tech/springboot-socket/fe-signin.png) _Frontend Login_

![Supabase Register Response Ok](/contents/tech/springboot-socket/fe-signinok.png) _Frontend Login Reponse Ok_

## Socket ê¸°ëŠ¥ ë§Œë“¤ê¸°