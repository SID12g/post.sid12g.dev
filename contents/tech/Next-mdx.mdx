---
title: Next.jsì—ì„œ mdx ì‚¬ìš©í•˜ê¸°
date: "2024-05-07"
description: Next 13ì—ì„œ mdx ì‚¬ìš©í•˜ê¸°
image: /contents/tech/Next-mdx/Thumbnail.png
tag: Next
---

ì˜¤ëŠ˜ì€ Next.jsì—ì„œ mdxë¥¼ ì‚¬ìš©í•˜ëŠ” ë²•ì„ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.

ì§€ê¸ˆ ì´ ë¸”ë¡œê·¸ë„ mdxë¥¼ ì‚¬ìš©í•˜ì—¬ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ë§ì€ ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ğŸ˜„

ìš°ì„  mdxë€ md(ë§ˆí¬ë‹¤ìš´) íŒŒì¼ ë‚´ì— JSXë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì§€ì›í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.

## ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜í•˜ê¸°

mdx íŒŒì¼ì„ ì½ê¸° ìœ„í•´ ì•„ë˜ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•´ì£¼ê² ìŠµë‹ˆë‹¤.

```zsh
yarn add next-mdx-remote gray-matter
```

next-mdx-remoteë¥¼ ì´ìš©í•˜ì—¬ mdxë¥¼ ì»´í¬ë„ŒíŠ¸í™” í•˜ê³ , gray-matterë¥¼ í†µí•´ mdx íŒŒì¼ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

## í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‘ì„±í•˜ê¸°

ê·¸ë¦¬ê³  contents íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ test.mdx ë¼ëŠ” í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ í•˜ë‚˜ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

![íŒŒì¼ ë””ë ‰í† ë¦¬](/contents/tech/Next-mdx/directory.png) _Caption goes here_

ê·¸ í›„ test.mdxì— ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ì„ ë„£ì–´ì£¼ê² ìŠµë‹ˆë‹¤.

````markdown
// contents/test.mdx

title: í…ŒìŠ¤íŠ¸ 1 ì œëª©
date: "2024-05-07"
description: í…ŒìŠ¤íŠ¸ 1 ì„¤ëª…
tag: íƒœê·¸ 1

---

## test

test

```tsx
// src/app/page.tsx
export default function Home() {
  return <div>Home</div>;
}
```
````

ì½”ë“œ ê°™ì€ ê²½ìš° (```)ë¡œ ì½”ë“œë¥¼ ê°ì‹¸ê³  ì²«ì¤„ì— ì–¸ì–´ë¥¼ ì‘ì„±í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

## mdx íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°

mdx íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ app ë””ë ‰í† ë¦¬ ë‚´ì— contents í´ë”ì™€ contents í´ë” ë‚´ì— [slug] í´ë”ë¥¼ ë§Œë“  ë’¤, page.tsxë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```tsx:src/app/contents/[slug]/page.tsx
import styles from "@/app/contents/[slug]/page.module.css";
import fs from "fs";
import path from "path";
import matter from "gray-matter";
import { MDXRemote } from "next-mdx-remote/rsc";

export async function generateStaticParams() {
  const files = fs.readdirSync(path.join("contents"));
  const paths = files.map((filename) => ({
    slug: filename.replace(".mdx", ""),
  }));
  return paths;
}

function getContent({ slug }: { slug: string }) {
  const markdownFile = fs.readFileSync(
    path.join("contents", slug + ".mdx"),
    "utf-8"
  );
  const { data: frontMatter, content } = matter(markdownFile);
  return {
    frontMatter,
    slug,
    content,
  };
}

export async function generateMetadata({ params }: any) {
  const content = getContent(params);
  return {
    title: content.frontMatter.title,
    description: content.frontMatter.description,
    openGraph: {
      title: content.frontMatter.title,
      description: content.frontMatter.description,
      url: `https://localhost:3000/contents/${content.slug}`,
      locale: "ko_KR",
      type: "article",
    },
  };
}

export default function Post({ params }: any) {
  const props = getContent(params);

  return (
    <article>
      <div>
        <div>{props.frontMatter.date}</div>
        <div>{props.frontMatter.tag}</div>
      </div>
      <h1>{props.frontMatter.title}</h1>
      <p>{props.frontMatter.description}</p>
      <div className={styles.content}>
        <MDXRemote source={props.content} />
      </div>
    </article>
  );
}
```

ì½”ë“œë¥¼ ì„¤ëª…í•˜ìë©´, gray-matterë¥¼ í†µí•´ mdx íŒŒì¼ì˜ ì‘ì„±ì¼ì, íƒœê·¸, ì œëª©, ì„¤ëª… ë“±ì„ ì‰½ê²Œ ê°€ì ¸ì™€ì„œ ë©”íƒ€ë°ì´í„°ë¥¼ ë§Œë“¤ê³ , ì›í•˜ëŠ” ê³³ì— ìœ„ì¹˜ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  fsë¥¼ ì´ìš©í•˜ì—¬ ì‹œìŠ¤í…œì—ì„œ mdx íŒŒì¼ì„ ì½ê³ , pathë¥¼ ì´ìš©í•´ mdx íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì°¾ì•„ mdx íŒŒì¼ì˜ íŒŒì¼ëª…ì„ ì‚¬ìš©í•˜ì—¬ paramsë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

ê°€ì ¸ì˜¨ mdx íŒŒì¼ì„ MDXRemote ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

MDXRemoteì— ëŒ€í•œ ìŠ¤íƒ€ì¼ë§ì€ ê²‰ì— divë¥¼ ë‘˜ëŸ¬ í•´ë‹¹ divë¥¼ ìŠ¤íƒ€ì¼ë§í•˜ì—¬ ëŒ€ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![content](/contents/tech/Next-mdx/first-mdx.png)

ìœ„ì™€ ê°™ì€ í˜ì´ì§€ê°€ ë‚˜íƒ€ë‚œë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤!

## ëª¨ë“  mdx íŒŒì¼ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ í•¨ìˆ˜ ë§Œë“¤ê¸°

ë©”ì¸ í˜ì´ì§€ì— ëª¨ë“  mdx íŒŒì¼ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ ìœ„í•œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

src ë””ë ‰í† ë¦¬ ì•ˆì— utils í´ë”ë¥¼ ë§Œë“  ë’¤, getContents.ts íŒŒì¼ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

```tsx
// src/utils/getContents.ts
import fs from "fs";
import path from "path";
import matter from "gray-matter";

const postDir = "contents";
const files = fs.readdirSync(path.join(process.cwd(), postDir));

const allContents = files
  .map((filename) => {
    const fileContent = fs.readFileSync(path.join(postDir, filename), "utf-8");
    const { data: frontMatter } = matter(fileContent);
    return {
      meta: frontMatter,
      slug: filename.replace(".mdx", ""),
      content: fileContent,
    };
  })
  .filter((post) => post.meta.tag);

const contents = allContents.sort((a, b) => {
  const dateA = a.meta.date.toLowerCase();
  const dateB = b.meta.date.toLowerCase();
  return dateB.localeCompare(dateA);
});

export default contents;
```

ìœ„ì— ì½”ë“œ ë˜í•œ fs, path, matterë¥¼ í†µí•´ ëª¨ë“  mdx íŒŒì¼ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ í›„ ì•„ë˜ì™€ ê°™ì€ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

````tsx
[
  {
    meta: {
      title: "í…ŒìŠ¤íŠ¸ 1 ì œëª©",
      date: "2024-05-07",
      description: "í…ŒìŠ¤íŠ¸ 1 ì„¤ëª…",
      tag: "íƒœê·¸ 1",
    },
    slug: "test",
    content:
      "---\n" +
      "title: í…ŒìŠ¤íŠ¸ 1 ì œëª©\n" +
      'date: "2024-05-07"\n' +
      "description: í…ŒìŠ¤íŠ¸ 1 ì„¤ëª…\n" +
      "tag: íƒœê·¸ 1\n" +
      "---\n" +
      "\n" +
      "## test\n" +
      "\n" +
      "test\n" +
      "\n" +
      "```tsx\n" +
      "// src/app/page.tsx\n" +
      "export default function Home() {\n" +
      "  return <div>Home</div>;\n" +
      "}\n" +
      "```\n",
  },
];
````

## ë©”ì¸ í˜ì´ì§€ì— ëª¨ë“  mdx íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°

test2.mdx, test3.mdxë¼ëŠ” mdx íŒŒì¼ 2ê°œë¥¼ ë” ë§Œë“¤ì–´ì£¼ê² ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  exportëœ contentsë¥¼ page.tsxì— ë¶ˆëŸ¬ì™€ì„œ contentsì•ˆì— ìˆëŠ” ìš”ì†Œ ìˆ˜ ë§Œí¼ í•´ë‹¹ contentë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” ë¯¸ë¦¬ë³´ê¸°ë¥¼ ë§Œë“¤ì–´ì£¼ê² ìŠµë‹ˆë‹¤.

```tsx
import contents from "@/utils/getContents";
import Link from "next/link";

export default function Home() {
  return (
    <div>
      <div>
        {contents.map((content, index) => (
          <div
            style={{ border: "1px solid black", margin: 8, padding: 8 }}
            key={index}
          >
            <Link href={`/contents/${content.slug}`}>
              {content.meta.title} ({content.meta.tag}) ({content.meta.date})
            </Link>
          </div>
        ))}
      </div>
    </div>
  );
}
```

ìœ„ ì½”ë“œì˜ ëª¨ìŠµì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

![contents ë¦¬ìŠ¤íŠ¸](/contents/tech/Next-mdx/mdx-list.png)

(ì €ëŠ” test3.mdxì˜ íƒœê·¸ë¥¼ test.mdxì™€ ê°™ì´ íƒœê·¸ 1ë¡œ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.)

ìœ„ ì²˜ëŸ¼ contents í´ë” ë‚´ì— ìˆëŠ” mdx íŒŒì¼ë“¤ì´ ëª¨ë‘ ìˆë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.

mdx íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë‚´ìš©ì€ ë‹¤ ëë‚¬ì§€ë§Œ ì´ëŒ€ë¡œ ëë‚´ê¸´ ì•„ì‰¬ìš°ë‹ˆ íŒì„ ë“œë¦¬ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜»

## h íƒœê·¸ì— ë§í¬ ê±¸ê¸°

![title-link](/contents/tech/Next-mdx/title-link.png)

ìœ„ì™€ ê°™ì´ # ì´ ë“¤ì–´ê°€ëŠ” h íƒœê·¸ë“¤ì„ ëˆ„ë¥´ë©´ ìœ„ì²˜ëŸ¼ í•´ë‹¹ ë‚´ìš©ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” rehypePluginsë¥¼ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

```terminal
yarn add rehype-autolink-headings rehype-slug
```

ìœ„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤. rehype-autolink-headingsëŠ” híƒœê·¸ë¥¼ ëˆ„ë¥´ë©´ ì´ë™í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ê³ , rehype-slugì˜ ê²½ìš°ëŠ” h íƒœê·¸ì— ê³ ìœ í•œ idë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤.

```tsx
// src/app/contents/[slug]/page.tsx
import rehypeAutolinkHeadings from "rehype-autolink-headings";
import rehypeSlug from "rehype-slug";

const options: any = {
  mdxOptions: {
    remarkPlugins: [],
    rehypePlugins: [
      rehypeSlug,
      [
        rehypeAutolinkHeadings,
        {
          behavior: "wrap",
          properties: {
            className: [styles.anchor],
          },
        },
      ],
    ],
  },
};

<MDXRemote source={props.content} options={options} />;
```

ê·¸ë¦¬ê³  optionsë¥¼ ë§Œë“¤ì–´ rehypePluginsì— ìœ„ì™€ ê°™ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì¶”ê°€í•´ì£¼ê³ , MDXRemoteì— ìˆëŠ” optionsì— optionsë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ h íƒœê·¸ì— ë§í¬ê°€ ê±¸ë¦° ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì½”ë“œë¸”ëŸ­ ìŠ¤íƒ€ì¼ë§í•˜ê¸°

![codeblock-style-last](/contents/tech/Next-mdx/code-last.png)

ì½”ë“œë¸”ëŸ­ì„ ìœ„ ì²˜ëŸ¼ ìŠ¤íƒ€ì¼ë§ í•˜ëŠ” ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

ìš°ì„  rehype-highlight ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.

```terminal
yarn add rehype-highlight
```

ê·¸ë¦¬ê³  [Github](https://github.com/highlightjs/highlight.js/tree/main/src/styles) ì—ì„œ ì›í•˜ëŠ” íŒŒì¼ì„ ì„ íƒí•´ ë‹¤ìš´ë¡œë“œ í•©ë‹ˆë‹¤.

ì €ëŠ” github-dark.cssë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  src ë””ë ‰í† ë¦¬ ë‚´ì— highlight-js í´ë”ë¥¼ ë§Œë“  ë’¤ ë‹¤ìš´ë¡œë“œ í•œ íŒŒì¼ì„ ë„£ì–´ì¤ë‹ˆë‹¤.

ê·¸ë¦¬ê³  rehype-highlightë¥¼ optionsì— ì¶”ê°€í•˜ê³  ë‹¤ìš´ë¡œë“œí•œ íŒŒì¼ì„ import í•´ì¤ë‹ˆë‹¤.

```tsx
// src/app/contents/[slug]/page.tsx
import rehypeHighlight from "rehype-highlight";
import "@/highlight-js/github-dark.css";

const options: any = {
  mdxOptions: {
    remarkPlugins: [],
    rehypePlugins: [
      rehypeSlug,
      rehypeHighlight,
      [
        rehypeAutolinkHeadings,
        {
          behavior: "wrap",
          properties: {
            className: [styles.anchor],
          },
        },
      ],
    ],
  },
};
```

![codeblock-style-first](/contents/tech/Next-mdx/code-first.png)

ì¶”ê°€í•˜ë©´ ìœ„ì™€ ê°™ì´ ì½”ë“œë¸”ëŸ­ì´ ìŠ¤íƒ€ì¼ë§ ë©ë‹ˆë‹¤.

ì—¬ê¸°ì„œ ì¶”ê°€ë¡œ ìŠ¤íƒ€ì¼ë§ í•´ì¤€ë‹¤ë©´ ë§¨ ìœ„ ì½”ë“œë¸”ëŸ­ê³¼ ê°™ì´ ìŠ¤íƒ€ì¼ë§ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì €ì˜ ìŠ¤íƒ€ì¼ë§ì€ [Github](https://github.com/SID12g/mdx-content/blob/main/src/app/contents/%5Bslug%5D/page.module.css) ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬

ìœ„ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì™¸ì—ë„ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“¤ì´ ìˆìœ¼ë‹ˆ ì´ë¥¼ ì°¸ê³ í•´ì„œ ìì‹ ì´ ì›í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ í™œìš©í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

![contents-list-tag](/contents/tech/Next-mdx/mdx-list-tag.png)

ì €ëŠ” íƒœê·¸ ë³„ë¡œ contentsë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ë³´ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. í•´ë‹¹ í™œìš©ë²•ì´ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ [Github](https://github.com/SID12g/mdx-content/) ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.

ê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! â˜ºï¸

[ì´ë¯¸ì§€: freepik]
