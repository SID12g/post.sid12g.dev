---
title: TanStack Query ì•Œì•„ë³´ê¸°
date: "2024-08-06"
description: TanStack Queryì˜ íŠ¹ì§•ê³¼ ì‚¬ìš©í•˜ëŠ” ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤.
image: /contents/tech/tanstack-query/thumbnail.png
tag: React
---

> ì´ ê¸€ì€ TanStack Query v5ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

## TanStack Queryë€?

TanStack QueryëŠ” data fetching, caching, synchronizing, updating server state ë“±ì„ ì§€ì›í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

## TanStack Query ì„¤ì¹˜í•˜ê¸°

React í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œ ë’¤ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ TanStack Queryë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
yarn add @tanstack/react-query
```

Reactê°€ ì•„ë‹Œ ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ [ê³µì‹ ë¬¸ì„œ](https://tanstack.com/query/latest/docs/framework/react/installation)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.

## Fetch

FetchëŠ” ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆëŠ” APIì…ë‹ˆë‹¤. ì›ë˜ Fetch APIë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

```js
async function fetchData() {
  const response = await fetch("http://example.com/movies.json");
  const data = await response.json();
  console.log(data);
}
```

í•˜ì§€ë§Œ TanStack Queryë¥¼ ì‚¬ìš©í•  ë•Œ ì½”ë“œëŠ” ì¡°ê¸ˆ ë‹¤ë¦…ë‹ˆë‹¤. ìš°ì„  TanStack Queryë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ QueryClientProviderë¡œ ê°ì‹¸ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

```tsx
import {
  QueryClient,
  QueryClientProvider,
  useQuery,
} from "@tanstack/react-query";

const queryClient = new QueryClient();

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <Example />
    </QueryClientProvider>
  );
}

function Example() {
  const { isPending, error, data } = useQuery({
    queryKey: ["repoData"],
    queryFn: () =>
      fetch("https://api.github.com/repos/TanStack/query").then((res) =>
        res.json()
      ),
  });

  if (isPending) return "Loading...";

  if (error) return "An error has occurred: " + error.message;

  return (
    <div>
      <h1>{data.name}</h1>
      <p>{data.description}</p>
      <strong>ğŸ‘€ {data.subscribers_count}</strong>{" "}
      <strong>âœ¨ {data.stargazers_count}</strong>{" "}
      <strong>ğŸ´ {data.forks_count}</strong>
    </div>
  );
}
```

![useQuery ì‚¬ìš©](/contents/tech/tanstack-query/isPending.gif) _useQuery ì‚¬ìš© ì‹œ isPendingìœ¼ë¡œ ë¡œë”© ì¤‘ì¸ì§€ í™•ì¸_

TanStack Queryì˜ ê²½ìš°ì—ëŠ” useQuery (GET), useMutation (POST, PUT, UPDATE, DELETE) ë“±ì„ ì‚¬ìš©í•˜ì—¬ fetchë¥¼ í•˜ê²Œ ë©ë‹ˆë‹¤. useQueryì˜ ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ queryKeyì— Cachingì— í•„ìš”í•œ ì¿¼ë¦¬ í‚¤ë¥¼ ì…ë ¥ë°›ê³ , queryFnì— ê¸°ë³¸ fetch í•¨ìˆ˜ë¥¼ ì…ë ¥ë°›ìŠµë‹ˆë‹¤.

ë˜í•œ ê²°ê³¼ ê°’ìœ¼ë¡œ isPending, error, data ë“± ì—¬ëŸ¬ê°€ì§€ ì˜µì…˜ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ”ë°, isPendingì˜ ê²½ìš° dataê°€ ë¶ˆëŸ¬ì™€ ì§€ê³  ìˆëŠ”ì§€ (ë¡œë”© ì¤‘ì¸ì§€)ë¥¼ ì•Œ ìˆ˜ ìˆê³ , errorëŠ” dataë¥¼ ê°€ì ¸ì˜¤ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•œ errorë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½ fetchì— ëŒ€í•´ ë” ì•Œì•„ë³´ê³  ì‹¶ë‹¤ë©´ [mdn web docs](https://developer.mozilla.org/ko/docs/Web/API/Fetch_API/Using_Fetch)ë¥¼ useQueryì˜ ì—¬ëŸ¬ ì…ë ¥, ê²°ê³¼ ê°’ë“¤ì„ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ [useQuery](https://tanstack.com/query/latest/docs/framework/react/reference/useQuery#usequery)ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. ì´ì™¸ì—ë„ [useMutation](https://tanstack.com/query/latest/docs/framework/react/reference/useMutation#usemutation)ê³¼ ìš”ì²­ì„ ì—¬ëŸ¬ê°œ ë³´ë‚¼ ìˆ˜ ìˆëŠ” [useQueries](https://tanstack.com/query/latest/docs/framework/react/reference/useQueries), Suspenseë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” [useSuspenseQuery](https://tanstack.com/query/latest/docs/framework/react/reference/useSuspenseQuery) ë“± ìˆ˜ë§ì€ ì¿¼ë¦¬ í•¨ìˆ˜ë“¤ì´ ìˆìœ¼ë‹ˆ ê¼­ ê³µì‹ë¬¸ì„œë¥¼ í™•ì¸í•´ ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

## Caching

Cachingì´ë€ ë°ì´í„°ë¥¼
